"use strict";

/**
 @module login
*/
var $ = require('jquery'); // try and remove jquery in a refactor soon


var mode = 'signin';
/**
 * Inserts the login page in to the current document HTML.
 * It will be invisible and should not alter current page until
 * triggered to display
 */

var insertLoginHtml = function insertLoginHtml() {
  // this will be inlined by parcel
  var html = Buffer("PGRpYWxvZyBjbGFzcz0id3JhcC1sb2dpbjEwMCBwLWwtNTUgcC1yLTU1IHAtdC02NSBwLWItNTAgaG9sby1kaWFsb2ciPg0KCTxsaW5rIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9jc3MiIGhyZWY9Ii8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1PcGVuK1NhbnMiIC8+DQoNCgk8Zm9ybSBjbGFzcz0ibG9naW4xMDAtZm9ybSB2YWxpZGF0ZS1mb3JtIGhvbG8tbG9naW4tZm9ybSI+DQogICAgDQogICAgPGRpdiBjbGFzcz0idGFiIj4NCiAgICAgIDxidXR0b24gY2xhc3M9InRhYmxpbmtzIGFjdGl2ZSIgaWQ9InNpZ25pbiI+TG9nIEluPC9idXR0b24+DQogICAgICA8YnV0dG9uIGNsYXNzPSJ0YWJsaW5rcyIgaWQ9InNpZ251cCI+U2lnbiBVcDwvYnV0dG9uPg0KICAgIDwvZGl2Pg0KICAgIA0KICAgIDxici8+DQogICAgDQogICAgPGRpdiBpZD0ic2lnbmluLWluZm8iIGNsYXNzPSJ0YWJjb250ZW50IGFjdGl2ZXRhYiI+DQogICAgICA8c3BhbiBjbGFzcz0ibG9naW4xMDAtZm9ybS10aXRsZSBwLWItMzMiPg0KICAgICAgICBTaWduIGluIHRvIEhvbG8NCiAgICAgIDwvc3Bhbj4NCiAgICAgIDxici8+DQogICAgICA8c3BhbiBjbGFzcz0ibG9naW4xMDAtZm9ybS1kZXNjcmlwdGlvbiI+DQogICAgICAgIFNpZ24gaW4gdG8gcmVjb3ZlciBleGlzdGluZyBrZXlzLiBNYWtlIHN1cmUgeW91IGdldCB5b3VyIGVtYWlsIGFuZCBwYXNzd29yZCBjb3JyZWN0IG9yIGVsc2UgYSBkdW1teSBhY2NvdW50IHdpbGwgYmUgY3JlYXRlZCB3aGljaCBtYXkgbm90IGJlIGF2YWlsYWJsZSBpbiB0aGUgZnV0dXJlDQogICAgICA8L3NwYW4+ICANCiAgICA8L2Rpdj4NCiAgICA8ZGl2IGlkPSJzaWdudXAtaW5mbyIgY2xhc3M9InRhYmNvbnRlbnQiPg0KICAgICAgPHNwYW4gY2xhc3M9ImxvZ2luMTAwLWZvcm0tdGl0bGUgcC1iLTMzIj4NCiAgICAgICAgU2lnbiB1cCBmb3IgSG9sbw0KICAgICAgPC9zcGFuPg0KICAgICAgPGJyLz4NCiAgICAgIDxzcGFuIGNsYXNzPSJsb2dpbjEwMC1mb3JtLWRlc2NyaXB0aW9uIj4NCiAgICAgICAgRW50ZXIgYW4gZW1haWwgYW5kIHBhc3N3b3JkIHRvIGdlbmVyYXRlIGtleXMgZm9yIEhvbG8uIFJlLXJlZ2lzdGVyaW5nIGFuIGV4aXN0aW5nIGVtYWlsIHdpbGwgb3ZlcndyaXRlIHRoZSBleGlzdGluZyBhY2NvdW50IGFuZCB5b3Ugd2lsbCBsb3NlIGFjY2VzcyB0byB5b3VyIG9sZCBrZXlzDQogICAgICA8L3NwYW4+ICANCiAgICA8L2Rpdj4NCiAgICANCiAgICA8YnIvPg0KDQogICAgPGRpdiBjbGFzcz0id3JhcC1pbnB1dDEwMCB2YWxpZGF0ZS1pbnB1dCIgZGF0YS12YWxpZGF0ZSA9ICJWYWxpZCBlbWFpbCBpcyByZXF1aXJlZDogZXhAYWJjLnh5eiI+DQogICAgICA8aW5wdXQgY2xhc3M9ImlucHV0MTAwIiB0eXBlPSJ0ZXh0IiBuYW1lPSJlbWFpbCIgcGxhY2Vob2xkZXI9IkVtYWlsIj4NCiAgICAgIDxzcGFuIGNsYXNzPSJmb2N1cy1pbnB1dDEwMC0xIj48L3NwYW4+DQogICAgICA8c3BhbiBjbGFzcz0iZm9jdXMtaW5wdXQxMDAtMiI+PC9zcGFuPg0KICAgIDwvZGl2Pg0KDQogICAgPGRpdiBjbGFzcz0id3JhcC1pbnB1dDEwMCByczEgdmFsaWRhdGUtaW5wdXQiIGRhdGEtdmFsaWRhdGU9IlBhc3N3b3JkIGlzIHJlcXVpcmVkIj4NCiAgICAgIDxpbnB1dCBjbGFzcz0iaW5wdXQxMDAiIHR5cGU9InBhc3N3b3JkIiBuYW1lPSJwYXNzIiBwbGFjZWhvbGRlcj0iUGFzc3dvcmQiPg0KICAgICAgPHNwYW4gY2xhc3M9ImZvY3VzLWlucHV0MTAwLTEiPjwvc3Bhbj4NCiAgICAgIDxzcGFuIGNsYXNzPSJmb2N1cy1pbnB1dDEwMC0yIj48L3NwYW4+DQogICAgPC9kaXY+DQoNCiAgICA8YnIvPg0KICAgIA0KICAgIDxkaXYgY2xhc3M9InNpZ25pbiBjb250YWluZXItbG9naW4xMDAtZm9ybS1idG4gbS10LTIwIj4NCiAgICAgIDxidXR0b24gaWQ9InNpZ25pbi1idXR0b24iIGNsYXNzPSJsb2dpbjEwMC1mb3JtLWJ0biI+DQogICAgICAgIFNpZ24gaW4NCiAgICAgIDwvYnV0dG9uPg0KICAgIDwvZGl2Pg0KCTwvZm9ybT4NCjwvZGlhbG9nPg==", "base64");
  var cssMain = Buffer("DQouaG9sby1kaWFsb2cgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iZyk7DQogIGNvbG9yOiB2YXIoLS10ZXh0LWNvbG9yKTsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICBib3JkZXI6IG5vbmU7DQogIHBhZGRpbmc6IDJyZW07DQogIGJvcmRlci1yYWRpdXM6IDZweDsNCiAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgYm94LXNoYWRvdzogMCAwIDQwcHggcmdiYSgwLDAsMCwwLjEpLCAwIDAgMTBweCByZ2JhKDAsMCwwLDAuMjUpOw0KICBtYXgtd2lkdGg6IDkwdnc7DQogIHBvc2l0aW9uOiBmaXhlZDsNCiAgdG9wOiA1MCU7DQogIHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsIC01MCUpOw0KfQ0KDQouaG9sby1kaWFsb2c6OmJhY2tkcm9wIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjQpOw0KfQ0KDQouaG9sby1kaWFsb2cgKyAuYmFja2Ryb3Agew0KICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNCk7DQp9DQoNCi8qIFN0eWxlIHRoZSB0YWIgKi8NCi50YWIgew0KICBvdmVyZmxvdzogaGlkZGVuOw0KfQ0KDQovKiBTdHlsZSB0aGUgYnV0dG9ucyB0aGF0IGFyZSB1c2VkIHRvIG9wZW4gdGhlIHRhYiBjb250ZW50ICovDQoudGFiIGJ1dHRvbiB7DQogIGJhY2tncm91bmQtY29sb3I6IGluaGVyaXQ7DQogIGJvcmRlcjogbm9uZTsNCiAgb3V0bGluZTogbm9uZTsNCiAgY3Vyc29yOiBwb2ludGVyOw0KICBwYWRkaW5nOiAxNHB4IDE2cHg7DQogIHRyYW5zaXRpb246IDAuM3M7DQp9DQoNCi8qIENoYW5nZSBiYWNrZ3JvdW5kIGNvbG9yIG9mIGJ1dHRvbnMgb24gaG92ZXIgKi8NCi50YWIgYnV0dG9uOmhvdmVyIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2RkZDsNCn0NCg0KLyogQ3JlYXRlIGFuIGFjdGl2ZS9jdXJyZW50IHRhYmxpbmsgY2xhc3MgKi8NCi50YWIgYnV0dG9uLmFjdGl2ZSB7DQogIGJhY2tncm91bmQtY29sb3I6ICNjY2M7DQp9DQoNCi8qIFN0eWxlIHRoZSB0YWIgY29udGVudCAqLw0KLnRhYmNvbnRlbnQgew0KICBkaXNwbGF5OiBub25lOw0KICBwYWRkaW5nOiA2cHggMTJweDsNCiAgYm9yZGVyOiBub25lOw0KfQ0KDQovKiBTdHlsZSB0aGUgdGFiIGNvbnRlbnQgKi8NCi50YWJjb250ZW50LmFjdGl2ZXRhYiB7DQogIGRpc3BsYXk6IGJsb2NrOw0KICBib3JkZXI6IG5vbmU7DQp9DQovKi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KDQoNCi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCi5ob2xvLWRpYWxvZyBpbnB1dCB7DQogIG91dGxpbmU6IG5vbmU7DQogIGJvcmRlcjogbm9uZTsNCn0NCg0KLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KLmxvZ2luMTAwLWZvcm0tYnRuIHsNCiAgb3V0bGluZTogbm9uZSAhaW1wb3J0YW50Ow0KICBib3JkZXI6IG5vbmU7DQogIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50Ow0KfQ0KDQoubG9naW4xMDAtZm9ybS1idG4gew0KICBjdXJzb3I6IHBvaW50ZXI7DQp9DQoNCg0KLyovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NClsgbG9naW4gXSovDQoNCi53cmFwLWxvZ2luMTAwIHsNCiAgd2lkdGg6IDUwMHB4Ow0KICBiYWNrZ3JvdW5kOiAjZmZmOw0KICBib3JkZXItcmFkaXVzOiAxMHB4Ow0KICBvdmVyZmxvdzogaGlkZGVuOw0KDQogIGJveC1zaGFkb3c6IDAgM3B4IDIwcHggMHB4IHJnYmEoMCwgMCwgMCwgMC4xKTsNCiAgLW1vei1ib3gtc2hhZG93OiAwIDNweCAyMHB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMSk7DQogIC13ZWJraXQtYm94LXNoYWRvdzogMCAzcHggMjBweCAwcHggcmdiYSgwLCAwLCAwLCAwLjEpOw0KICAtby1ib3gtc2hhZG93OiAwIDNweCAyMHB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMSk7DQogIC1tcy1ib3gtc2hhZG93OiAwIDNweCAyMHB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMSk7DQp9DQoNCg0KLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NClsgRm9ybSBdKi8NCg0KLmxvZ2luMTAwLWZvcm0gew0KICB3aWR0aDogMTAwJTsNCn0NCg0KLmxvZ2luMTAwLWZvcm0tdGl0bGUgew0KICBkaXNwbGF5OiBibG9jazsNCiAgZm9udC1mYW1pbHk6IE9wZW4gU2FuczsNCiAgZm9udC1zaXplOiAzMHB4Ow0KICBjb2xvcjogIzU1NTU1NTsNCiAgbGluZS1oZWlnaHQ6IDEuMjsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KDQoubG9naW4xMDAtZm9ybS1kZXNjcmlwdGlvbiB7DQogIGRpc3BsYXk6IGJsb2NrOw0KICBmb250LWZhbWlseTogT3BlbiBTYW5zOw0KICBmb250LXNpemU6IDE0cHg7DQogIGNvbG9yOiAjNTU1NTU1Ow0KICBsaW5lLWhlaWdodDogMS4yOw0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQoNCi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpbIElucHV0IF0qLw0KDQoud3JhcC1pbnB1dDEwMCB7DQogIHdpZHRoOiAxMDAlOw0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQogIGJvcmRlcjogMXB4IHNvbGlkICNlNmU2ZTY7DQp9DQoNCi53cmFwLWlucHV0MTAwLnJzMSB7DQogIGJvcmRlci10b3A6IG5vbmU7DQp9DQoNCi5pbnB1dDEwMCB7DQogIGRpc3BsYXk6IGJsb2NrOw0KICB3aWR0aDogMTAwJTsNCiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7DQogIGZvbnQtZmFtaWx5OiBPcGVuIFNhbnM7DQogIGZvbnQtc2l6ZTogMTVweDsNCiAgY29sb3I6ICM2NjY2NjY7DQogIGxpbmUtaGVpZ2h0OiAxLjI7DQp9DQoNCg0KLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KaW5wdXQuaW5wdXQxMDAgew0KICBoZWlnaHQ6IDY4cHg7DQogIHBhZGRpbmc6IDAgMjVweCAwIDI1cHg7DQp9DQoNCi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpbIEZvY3VzIElucHV0IF0qLw0KDQouZm9jdXMtaW5wdXQxMDAtMSwgDQouZm9jdXMtaW5wdXQxMDAtMiB7DQogIGRpc3BsYXk6IGJsb2NrOw0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IDEwMCU7DQogIHRvcDogMDsNCiAgbGVmdDogMDsNCiAgcG9pbnRlci1ldmVudHM6IG5vbmU7DQp9DQoNCi5mb2N1cy1pbnB1dDEwMC0xOjpiZWZvcmUsDQouZm9jdXMtaW5wdXQxMDAtMjo6YmVmb3JlIHsNCiAgY29udGVudDogIiI7DQogIGRpc3BsYXk6IGJsb2NrOw0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHdpZHRoOiAwOw0KICBoZWlnaHQ6IDFweDsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzQyNzJkNzsNCn0NCg0KLmZvY3VzLWlucHV0MTAwLTE6OmJlZm9yZSB7DQogIHRvcDogLTFweDsNCiAgbGVmdDogMDsNCn0NCg0KLmZvY3VzLWlucHV0MTAwLTI6OmJlZm9yZSB7DQogIGJvdHRvbTogLTFweDsNCiAgcmlnaHQ6IDA7DQp9DQoNCi5mb2N1cy1pbnB1dDEwMC0xOjphZnRlciwNCi5mb2N1cy1pbnB1dDEwMC0yOjphZnRlciB7DQogIGNvbnRlbnQ6ICIiOw0KICBkaXNwbGF5OiBibG9jazsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICB3aWR0aDogMXB4Ow0KICBoZWlnaHQ6IDA7DQogIGJhY2tncm91bmQtY29sb3I6ICM0MjcyZDc7DQp9DQoNCi5mb2N1cy1pbnB1dDEwMC0xOjphZnRlciB7DQogIHRvcDogMDsNCiAgcmlnaHQ6IC0xcHg7DQp9DQoNCi5mb2N1cy1pbnB1dDEwMC0yOjphZnRlciB7DQogIGJvdHRvbTogMDsNCiAgbGVmdDogLTFweDsNCn0NCg0KLmlucHV0MTAwOmZvY3VzICsgLmZvY3VzLWlucHV0MTAwLTE6OmJlZm9yZSB7DQogIC13ZWJraXQtYW5pbWF0aW9uOiBmdWxsLXcgMC4ycyBsaW5lYXIgMHM7DQogIGFuaW1hdGlvbjogZnVsbC13IDAuMnMgbGluZWFyIDBzOw0KICBhbmltYXRpb24tZmlsbC1tb2RlOiBib3RoOw0KICAtd2Via2l0LWFuaW1hdGlvbi1maWxsLW1vZGU6IGJvdGg7DQp9DQoNCi5pbnB1dDEwMDpmb2N1cyArIC5mb2N1cy1pbnB1dDEwMC0xOjphZnRlciB7DQogIC13ZWJraXQtYW5pbWF0aW9uOiBmdWxsLWggMC4xcyBsaW5lYXIgMC4yczsNCiAgYW5pbWF0aW9uOiBmdWxsLWggMC4xcyBsaW5lYXIgMC4yczsNCiAgYW5pbWF0aW9uLWZpbGwtbW9kZTogYm90aDsNCiAgLXdlYmtpdC1hbmltYXRpb24tZmlsbC1tb2RlOiBib3RoOw0KfQ0KDQouaW5wdXQxMDA6Zm9jdXMgKyAuZm9jdXMtaW5wdXQxMDAtMSArIC5mb2N1cy1pbnB1dDEwMC0yOjpiZWZvcmUgew0KICAtd2Via2l0LWFuaW1hdGlvbjogZnVsbC13IDAuMnMgbGluZWFyIDAuM3M7DQogIGFuaW1hdGlvbjogZnVsbC13IDAuMnMgbGluZWFyIDAuM3M7DQogIGFuaW1hdGlvbi1maWxsLW1vZGU6IGJvdGg7DQogIC13ZWJraXQtYW5pbWF0aW9uLWZpbGwtbW9kZTogYm90aDsNCn0NCg0KLmlucHV0MTAwOmZvY3VzICsgLmZvY3VzLWlucHV0MTAwLTEgKyAuZm9jdXMtaW5wdXQxMDAtMjo6YWZ0ZXIgew0KICAtd2Via2l0LWFuaW1hdGlvbjogZnVsbC1oIDAuMXMgbGluZWFyIDAuNXM7DQogIGFuaW1hdGlvbjogZnVsbC1oIDAuMXMgbGluZWFyIDAuNXM7DQogIGFuaW1hdGlvbi1maWxsLW1vZGU6IGJvdGg7DQogIC13ZWJraXQtYW5pbWF0aW9uLWZpbGwtbW9kZTogYm90aDsNCn0NCg0KDQpAa2V5ZnJhbWVzIGZ1bGwtdyB7DQogIHRvIHsNCiAgICB3aWR0aDogY2FsYygxMDAlICsgMXB4KTsNCiAgfQ0KfQ0KDQpAa2V5ZnJhbWVzIGZ1bGwtaCB7DQogIHRvIHsNCiAgICBoZWlnaHQ6IGNhbGMoMTAwJSArIDFweCk7DQogIH0NCn0NCg0KDQovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KWyBCdXR0b24gXSovDQouY29udGFpbmVyLWxvZ2luMTAwLWZvcm0tYnRuIHsNCiAgd2lkdGg6IDEwMCU7DQogIGRpc3BsYXk6IC13ZWJraXQtYm94Ow0KICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7DQogIGRpc3BsYXk6IC1tb3otYm94Ow0KICBkaXNwbGF5OiAtbXMtZmxleGJveDsNCiAgZGlzcGxheTogZmxleDsNCiAgZmxleC13cmFwOiB3cmFwOw0KfQ0KDQoubG9naW4xMDAtZm9ybS1idG4gew0KICBkaXNwbGF5OiAtd2Via2l0LWJveDsNCiAgZGlzcGxheTogLXdlYmtpdC1mbGV4Ow0KICBkaXNwbGF5OiAtbW96LWJveDsNCiAgZGlzcGxheTogLW1zLWZsZXhib3g7DQogIGRpc3BsYXk6IGZsZXg7DQogIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICBhbGlnbi1pdGVtczogY2VudGVyOw0KICBwYWRkaW5nOiAwIDIwcHg7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IDYwcHg7DQogIGJhY2tncm91bmQtY29sb3I6ICM0MjcyZDc7DQoNCiAgZm9udC1mYW1pbHk6IE9wZW4gU2FuczsNCiAgZm9udC1zaXplOiAxNHB4Ow0KICBjb2xvcjogI2ZmZjsNCiAgbGluZS1oZWlnaHQ6IDEuMjsNCiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsNCg0KICAtd2Via2l0LXRyYW5zaXRpb246IGFsbCAwLjRzOw0KICAtby10cmFuc2l0aW9uOiBhbGwgMC40czsNCiAgLW1vei10cmFuc2l0aW9uOiBhbGwgMC40czsNCiAgdHJhbnNpdGlvbjogYWxsIDAuNHM7DQp9DQoNCi5sb2dpbjEwMC1mb3JtLWJ0bjpob3ZlciB7DQogIGJhY2tncm91bmQtY29sb3I6ICMzMzMzMzM7DQp9DQoNCg0KLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NClsgQWxlcnQgdmFsaWRhdGUgXSovDQoNCi52YWxpZGF0ZS1pbnB1dCB7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCn0NCg0KLmFsZXJ0LXZhbGlkYXRlOjpiZWZvcmUgew0KICBjb250ZW50OiBhdHRyKGRhdGEtdmFsaWRhdGUpOw0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIG1heC13aWR0aDogNzAlOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICBib3JkZXI6IDFweCBzb2xpZCAjYzgwMDAwOw0KICBib3JkZXItcmFkaXVzOiAycHg7DQogIHBhZGRpbmc6IDRweCAyNXB4IDRweCAxMHB4Ow0KICB0b3A6IDUwJTsNCiAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7DQogIC1tb3otdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpOw0KICAtbXMtdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpOw0KICAtby10cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7DQogIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTsNCiAgcmlnaHQ6IDEycHg7DQogIHBvaW50ZXItZXZlbnRzOiBub25lOw0KDQogIGZvbnQtZmFtaWx5OiBPcGVuIFNhbnM7DQogIGNvbG9yOiAjYzgwMDAwOw0KICBmb250LXNpemU6IDEzcHg7DQogIGxpbmUtaGVpZ2h0OiAxLjQ7DQogIHRleHQtYWxpZ246IGxlZnQ7DQoNCiAgdmlzaWJpbGl0eTogaGlkZGVuOw0KICBvcGFjaXR5OiAwOw0KDQogIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjRzOw0KICAtby10cmFuc2l0aW9uOiBvcGFjaXR5IDAuNHM7DQogIC1tb3otdHJhbnNpdGlvbjogb3BhY2l0eSAwLjRzOw0KICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuNHM7DQp9DQoNCi5hbGVydC12YWxpZGF0ZTo6YWZ0ZXIgew0KICBjb250ZW50OiAiXGYxMmEiOw0KICBmb250LWZhbWlseTogRm9udEF3ZXNvbWU7DQogIGRpc3BsYXk6IGJsb2NrOw0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIGNvbG9yOiAjYzgwMDAwOw0KICBmb250LXNpemU6IDE2cHg7DQogIHRvcDogNTAlOw0KICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTsNCiAgLW1vei10cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7DQogIC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7DQogIC1vLXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTsNCiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpOw0KICByaWdodDogMThweDsNCn0NCg0KLmFsZXJ0LXZhbGlkYXRlOmhvdmVyOmJlZm9yZSB7DQogIHZpc2liaWxpdHk6IHZpc2libGU7DQogIG9wYWNpdHk6IDE7DQp9DQoNCkBtZWRpYSAobWF4LXdpZHRoOiA5OTJweCkgew0KICAuYWxlcnQtdmFsaWRhdGU6OmJlZm9yZSB7DQogICAgdmlzaWJpbGl0eTogdmlzaWJsZTsNCiAgICBvcGFjaXR5OiAxOw0KICB9DQp9DQoNCg0KDQo=", "base64");
  var cssUtil = Buffer("DQouaG9sby1kaWFsb2cgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iZyk7DQogIGNvbG9yOiB2YXIoLS10ZXh0LWNvbG9yKTsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICBib3JkZXI6IG5vbmU7DQogIHBhZGRpbmc6IDJyZW07DQogIGJvcmRlci1yYWRpdXM6IDZweDsNCiAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgYm94LXNoYWRvdzogMCAwIDQwcHggcmdiYSgwLDAsMCwwLjEpLCAwIDAgMTBweCByZ2JhKDAsMCwwLDAuMjUpOw0KICBtYXgtd2lkdGg6IDkwdnc7DQogIHBvc2l0aW9uOiBmaXhlZDsNCiAgdG9wOiA1MCU7DQogIHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsIC01MCUpOw0KfQ0KDQouaG9sby1kaWFsb2c6OmJhY2tkcm9wIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjQpOw0KfQ0KDQouaG9sby1kaWFsb2cgKyAuYmFja2Ryb3Agew0KICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNCk7DQp9DQoNCi8qIFN0eWxlIHRoZSB0YWIgKi8NCi50YWIgew0KICBvdmVyZmxvdzogaGlkZGVuOw0KfQ0KDQovKiBTdHlsZSB0aGUgYnV0dG9ucyB0aGF0IGFyZSB1c2VkIHRvIG9wZW4gdGhlIHRhYiBjb250ZW50ICovDQoudGFiIGJ1dHRvbiB7DQogIGJhY2tncm91bmQtY29sb3I6IGluaGVyaXQ7DQogIGJvcmRlcjogbm9uZTsNCiAgb3V0bGluZTogbm9uZTsNCiAgY3Vyc29yOiBwb2ludGVyOw0KICBwYWRkaW5nOiAxNHB4IDE2cHg7DQogIHRyYW5zaXRpb246IDAuM3M7DQp9DQoNCi8qIENoYW5nZSBiYWNrZ3JvdW5kIGNvbG9yIG9mIGJ1dHRvbnMgb24gaG92ZXIgKi8NCi50YWIgYnV0dG9uOmhvdmVyIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2RkZDsNCn0NCg0KLyogQ3JlYXRlIGFuIGFjdGl2ZS9jdXJyZW50IHRhYmxpbmsgY2xhc3MgKi8NCi50YWIgYnV0dG9uLmFjdGl2ZSB7DQogIGJhY2tncm91bmQtY29sb3I6ICNjY2M7DQp9DQoNCi8qIFN0eWxlIHRoZSB0YWIgY29udGVudCAqLw0KLnRhYmNvbnRlbnQgew0KICBkaXNwbGF5OiBub25lOw0KICBwYWRkaW5nOiA2cHggMTJweDsNCiAgYm9yZGVyOiBub25lOw0KfQ0KDQovKiBTdHlsZSB0aGUgdGFiIGNvbnRlbnQgKi8NCi50YWJjb250ZW50LmFjdGl2ZXRhYiB7DQogIGRpc3BsYXk6IGJsb2NrOw0KICBib3JkZXI6IG5vbmU7DQp9DQovKi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KDQoNCi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCi5ob2xvLWRpYWxvZyBpbnB1dCB7DQogIG91dGxpbmU6IG5vbmU7DQogIGJvcmRlcjogbm9uZTsNCn0NCg0KLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KLmxvZ2luMTAwLWZvcm0tYnRuIHsNCiAgb3V0bGluZTogbm9uZSAhaW1wb3J0YW50Ow0KICBib3JkZXI6IG5vbmU7DQogIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50Ow0KfQ0KDQoubG9naW4xMDAtZm9ybS1idG4gew0KICBjdXJzb3I6IHBvaW50ZXI7DQp9DQoNCg0KLyovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NClsgbG9naW4gXSovDQoNCi53cmFwLWxvZ2luMTAwIHsNCiAgd2lkdGg6IDUwMHB4Ow0KICBiYWNrZ3JvdW5kOiAjZmZmOw0KICBib3JkZXItcmFkaXVzOiAxMHB4Ow0KICBvdmVyZmxvdzogaGlkZGVuOw0KDQogIGJveC1zaGFkb3c6IDAgM3B4IDIwcHggMHB4IHJnYmEoMCwgMCwgMCwgMC4xKTsNCiAgLW1vei1ib3gtc2hhZG93OiAwIDNweCAyMHB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMSk7DQogIC13ZWJraXQtYm94LXNoYWRvdzogMCAzcHggMjBweCAwcHggcmdiYSgwLCAwLCAwLCAwLjEpOw0KICAtby1ib3gtc2hhZG93OiAwIDNweCAyMHB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMSk7DQogIC1tcy1ib3gtc2hhZG93OiAwIDNweCAyMHB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMSk7DQp9DQoNCg0KLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NClsgRm9ybSBdKi8NCg0KLmxvZ2luMTAwLWZvcm0gew0KICB3aWR0aDogMTAwJTsNCn0NCg0KLmxvZ2luMTAwLWZvcm0tdGl0bGUgew0KICBkaXNwbGF5OiBibG9jazsNCiAgZm9udC1mYW1pbHk6IE9wZW4gU2FuczsNCiAgZm9udC1zaXplOiAzMHB4Ow0KICBjb2xvcjogIzU1NTU1NTsNCiAgbGluZS1oZWlnaHQ6IDEuMjsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KDQoubG9naW4xMDAtZm9ybS1kZXNjcmlwdGlvbiB7DQogIGRpc3BsYXk6IGJsb2NrOw0KICBmb250LWZhbWlseTogT3BlbiBTYW5zOw0KICBmb250LXNpemU6IDE0cHg7DQogIGNvbG9yOiAjNTU1NTU1Ow0KICBsaW5lLWhlaWdodDogMS4yOw0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQoNCi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpbIElucHV0IF0qLw0KDQoud3JhcC1pbnB1dDEwMCB7DQogIHdpZHRoOiAxMDAlOw0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQogIGJvcmRlcjogMXB4IHNvbGlkICNlNmU2ZTY7DQp9DQoNCi53cmFwLWlucHV0MTAwLnJzMSB7DQogIGJvcmRlci10b3A6IG5vbmU7DQp9DQoNCi5pbnB1dDEwMCB7DQogIGRpc3BsYXk6IGJsb2NrOw0KICB3aWR0aDogMTAwJTsNCiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7DQogIGZvbnQtZmFtaWx5OiBPcGVuIFNhbnM7DQogIGZvbnQtc2l6ZTogMTVweDsNCiAgY29sb3I6ICM2NjY2NjY7DQogIGxpbmUtaGVpZ2h0OiAxLjI7DQp9DQoNCg0KLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KaW5wdXQuaW5wdXQxMDAgew0KICBoZWlnaHQ6IDY4cHg7DQogIHBhZGRpbmc6IDAgMjVweCAwIDI1cHg7DQp9DQoNCi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpbIEZvY3VzIElucHV0IF0qLw0KDQouZm9jdXMtaW5wdXQxMDAtMSwgDQouZm9jdXMtaW5wdXQxMDAtMiB7DQogIGRpc3BsYXk6IGJsb2NrOw0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IDEwMCU7DQogIHRvcDogMDsNCiAgbGVmdDogMDsNCiAgcG9pbnRlci1ldmVudHM6IG5vbmU7DQp9DQoNCi5mb2N1cy1pbnB1dDEwMC0xOjpiZWZvcmUsDQouZm9jdXMtaW5wdXQxMDAtMjo6YmVmb3JlIHsNCiAgY29udGVudDogIiI7DQogIGRpc3BsYXk6IGJsb2NrOw0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHdpZHRoOiAwOw0KICBoZWlnaHQ6IDFweDsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzQyNzJkNzsNCn0NCg0KLmZvY3VzLWlucHV0MTAwLTE6OmJlZm9yZSB7DQogIHRvcDogLTFweDsNCiAgbGVmdDogMDsNCn0NCg0KLmZvY3VzLWlucHV0MTAwLTI6OmJlZm9yZSB7DQogIGJvdHRvbTogLTFweDsNCiAgcmlnaHQ6IDA7DQp9DQoNCi5mb2N1cy1pbnB1dDEwMC0xOjphZnRlciwNCi5mb2N1cy1pbnB1dDEwMC0yOjphZnRlciB7DQogIGNvbnRlbnQ6ICIiOw0KICBkaXNwbGF5OiBibG9jazsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICB3aWR0aDogMXB4Ow0KICBoZWlnaHQ6IDA7DQogIGJhY2tncm91bmQtY29sb3I6ICM0MjcyZDc7DQp9DQoNCi5mb2N1cy1pbnB1dDEwMC0xOjphZnRlciB7DQogIHRvcDogMDsNCiAgcmlnaHQ6IC0xcHg7DQp9DQoNCi5mb2N1cy1pbnB1dDEwMC0yOjphZnRlciB7DQogIGJvdHRvbTogMDsNCiAgbGVmdDogLTFweDsNCn0NCg0KLmlucHV0MTAwOmZvY3VzICsgLmZvY3VzLWlucHV0MTAwLTE6OmJlZm9yZSB7DQogIC13ZWJraXQtYW5pbWF0aW9uOiBmdWxsLXcgMC4ycyBsaW5lYXIgMHM7DQogIGFuaW1hdGlvbjogZnVsbC13IDAuMnMgbGluZWFyIDBzOw0KICBhbmltYXRpb24tZmlsbC1tb2RlOiBib3RoOw0KICAtd2Via2l0LWFuaW1hdGlvbi1maWxsLW1vZGU6IGJvdGg7DQp9DQoNCi5pbnB1dDEwMDpmb2N1cyArIC5mb2N1cy1pbnB1dDEwMC0xOjphZnRlciB7DQogIC13ZWJraXQtYW5pbWF0aW9uOiBmdWxsLWggMC4xcyBsaW5lYXIgMC4yczsNCiAgYW5pbWF0aW9uOiBmdWxsLWggMC4xcyBsaW5lYXIgMC4yczsNCiAgYW5pbWF0aW9uLWZpbGwtbW9kZTogYm90aDsNCiAgLXdlYmtpdC1hbmltYXRpb24tZmlsbC1tb2RlOiBib3RoOw0KfQ0KDQouaW5wdXQxMDA6Zm9jdXMgKyAuZm9jdXMtaW5wdXQxMDAtMSArIC5mb2N1cy1pbnB1dDEwMC0yOjpiZWZvcmUgew0KICAtd2Via2l0LWFuaW1hdGlvbjogZnVsbC13IDAuMnMgbGluZWFyIDAuM3M7DQogIGFuaW1hdGlvbjogZnVsbC13IDAuMnMgbGluZWFyIDAuM3M7DQogIGFuaW1hdGlvbi1maWxsLW1vZGU6IGJvdGg7DQogIC13ZWJraXQtYW5pbWF0aW9uLWZpbGwtbW9kZTogYm90aDsNCn0NCg0KLmlucHV0MTAwOmZvY3VzICsgLmZvY3VzLWlucHV0MTAwLTEgKyAuZm9jdXMtaW5wdXQxMDAtMjo6YWZ0ZXIgew0KICAtd2Via2l0LWFuaW1hdGlvbjogZnVsbC1oIDAuMXMgbGluZWFyIDAuNXM7DQogIGFuaW1hdGlvbjogZnVsbC1oIDAuMXMgbGluZWFyIDAuNXM7DQogIGFuaW1hdGlvbi1maWxsLW1vZGU6IGJvdGg7DQogIC13ZWJraXQtYW5pbWF0aW9uLWZpbGwtbW9kZTogYm90aDsNCn0NCg0KDQpAa2V5ZnJhbWVzIGZ1bGwtdyB7DQogIHRvIHsNCiAgICB3aWR0aDogY2FsYygxMDAlICsgMXB4KTsNCiAgfQ0KfQ0KDQpAa2V5ZnJhbWVzIGZ1bGwtaCB7DQogIHRvIHsNCiAgICBoZWlnaHQ6IGNhbGMoMTAwJSArIDFweCk7DQogIH0NCn0NCg0KDQovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KWyBCdXR0b24gXSovDQouY29udGFpbmVyLWxvZ2luMTAwLWZvcm0tYnRuIHsNCiAgd2lkdGg6IDEwMCU7DQogIGRpc3BsYXk6IC13ZWJraXQtYm94Ow0KICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7DQogIGRpc3BsYXk6IC1tb3otYm94Ow0KICBkaXNwbGF5OiAtbXMtZmxleGJveDsNCiAgZGlzcGxheTogZmxleDsNCiAgZmxleC13cmFwOiB3cmFwOw0KfQ0KDQoubG9naW4xMDAtZm9ybS1idG4gew0KICBkaXNwbGF5OiAtd2Via2l0LWJveDsNCiAgZGlzcGxheTogLXdlYmtpdC1mbGV4Ow0KICBkaXNwbGF5OiAtbW96LWJveDsNCiAgZGlzcGxheTogLW1zLWZsZXhib3g7DQogIGRpc3BsYXk6IGZsZXg7DQogIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICBhbGlnbi1pdGVtczogY2VudGVyOw0KICBwYWRkaW5nOiAwIDIwcHg7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IDYwcHg7DQogIGJhY2tncm91bmQtY29sb3I6ICM0MjcyZDc7DQoNCiAgZm9udC1mYW1pbHk6IE9wZW4gU2FuczsNCiAgZm9udC1zaXplOiAxNHB4Ow0KICBjb2xvcjogI2ZmZjsNCiAgbGluZS1oZWlnaHQ6IDEuMjsNCiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsNCg0KICAtd2Via2l0LXRyYW5zaXRpb246IGFsbCAwLjRzOw0KICAtby10cmFuc2l0aW9uOiBhbGwgMC40czsNCiAgLW1vei10cmFuc2l0aW9uOiBhbGwgMC40czsNCiAgdHJhbnNpdGlvbjogYWxsIDAuNHM7DQp9DQoNCi5sb2dpbjEwMC1mb3JtLWJ0bjpob3ZlciB7DQogIGJhY2tncm91bmQtY29sb3I6ICMzMzMzMzM7DQp9DQoNCg0KLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NClsgQWxlcnQgdmFsaWRhdGUgXSovDQoNCi52YWxpZGF0ZS1pbnB1dCB7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCn0NCg0KLmFsZXJ0LXZhbGlkYXRlOjpiZWZvcmUgew0KICBjb250ZW50OiBhdHRyKGRhdGEtdmFsaWRhdGUpOw0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIG1heC13aWR0aDogNzAlOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICBib3JkZXI6IDFweCBzb2xpZCAjYzgwMDAwOw0KICBib3JkZXItcmFkaXVzOiAycHg7DQogIHBhZGRpbmc6IDRweCAyNXB4IDRweCAxMHB4Ow0KICB0b3A6IDUwJTsNCiAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7DQogIC1tb3otdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpOw0KICAtbXMtdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpOw0KICAtby10cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7DQogIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTsNCiAgcmlnaHQ6IDEycHg7DQogIHBvaW50ZXItZXZlbnRzOiBub25lOw0KDQogIGZvbnQtZmFtaWx5OiBPcGVuIFNhbnM7DQogIGNvbG9yOiAjYzgwMDAwOw0KICBmb250LXNpemU6IDEzcHg7DQogIGxpbmUtaGVpZ2h0OiAxLjQ7DQogIHRleHQtYWxpZ246IGxlZnQ7DQoNCiAgdmlzaWJpbGl0eTogaGlkZGVuOw0KICBvcGFjaXR5OiAwOw0KDQogIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjRzOw0KICAtby10cmFuc2l0aW9uOiBvcGFjaXR5IDAuNHM7DQogIC1tb3otdHJhbnNpdGlvbjogb3BhY2l0eSAwLjRzOw0KICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuNHM7DQp9DQoNCi5hbGVydC12YWxpZGF0ZTo6YWZ0ZXIgew0KICBjb250ZW50OiAiXGYxMmEiOw0KICBmb250LWZhbWlseTogRm9udEF3ZXNvbWU7DQogIGRpc3BsYXk6IGJsb2NrOw0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIGNvbG9yOiAjYzgwMDAwOw0KICBmb250LXNpemU6IDE2cHg7DQogIHRvcDogNTAlOw0KICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTsNCiAgLW1vei10cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7DQogIC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7DQogIC1vLXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTsNCiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpOw0KICByaWdodDogMThweDsNCn0NCg0KLmFsZXJ0LXZhbGlkYXRlOmhvdmVyOmJlZm9yZSB7DQogIHZpc2liaWxpdHk6IHZpc2libGU7DQogIG9wYWNpdHk6IDE7DQp9DQoNCkBtZWRpYSAobWF4LXdpZHRoOiA5OTJweCkgew0KICAuYWxlcnQtdmFsaWRhdGU6OmJlZm9yZSB7DQogICAgdmlzaWJpbGl0eTogdmlzaWJsZTsNCiAgICBvcGFjaXR5OiAxOw0KICB9DQp9DQoNCg0KDQo=", "base64");
  var template = document.createElement('template');
  template.id = 'login-template';
  template.innerHTML = html;
  document.body.appendChild(template); // this is the node of the object you wanted

  var documentFragment = template.content;
  var templateClone = documentFragment.cloneNode(true);
  document.body.appendChild(templateClone); // this empty root now has your template

  var style = document.createElement('style');
  style.innerHTML = cssMain;
  style.innerHTML += cssUtil;
  template.appendChild(style);
  var modal = document.querySelector('.holo-dialog');
  modal.appendChild(style);
};
/**
 * Shows the login dialog.
 * @return     {Promise} returns a promise that resolves with the success/failure of the login
 */


var showLoginDialog = function showLoginDialog() {
  return new Promise(function (resolve, reject) {
    var modal = document.querySelector('.holo-dialog');

    modal.onSuccess = function (email, password) {
      var newRegistration = mode === 'signup';
      resolve({
        email: email,
        password: password,
        newRegistration: newRegistration
      });
    };

    modal.onFailure = function (email, password) {
      reject(new Error('login did not validate'));
    };

    modal.showModal();
  });
};
/**
 * Registers all the functionality of the login dialog.
 * This must be on page load called for it to work
 */


var registerLoginCallbacks = function registerLoginCallbacks() {
  var dialogPolyfill = require('dialog-polyfill');

  var modal = document.querySelector('.holo-dialog');
  dialogPolyfill.registerDialog(modal);
  /* ==================================================================
    [ Validate ] */

  var input = $('.holo-login-form .input100');
  $('.tablinks').on('click', function (e) {
    e.preventDefault();
    mode = e.currentTarget.id;
    $('.tabcontent').removeClass('activetab');
    $('.tablinks').removeClass('active');
    $('#' + mode + '-info').addClass('activetab');
    $('#' + mode).addClass('active');
  });
  $('.holo-login-form').on('submit', function (e) {
    e.preventDefault();
    var check = true;

    for (var i = 0; i < input.length; i++) {
      if (validate(input[i]) === false) {
        showValidate(input[i]);
        check = false;
      }
    }

    console.log('success?: ', check);
    var email = $(input[0]).val();
    var password = $(input[1]).val();

    if (check) {
      console.log('starting keygen process with: ', email, password);
      modal.onSuccess(email, password);
      modal.close();
    } else {
      modal.onFailure(email, password);
    }

    return check;
  });
  $('.holo-login-form .input100').each(function () {
    $(this).focus(function () {
      hideValidate(this);
    });
  });

  function validate(input) {
    if ($(input).attr('type') === 'email' || $(input).attr('name') === 'email') {
      if ($(input).val().trim().match(/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{1,5}|[0-9]{1,3})(\]?)$/) == null) {
        return false;
      }
    } else {
      if ($(input).val().trim() === '') {
        return false;
      }
    }
  }

  function showValidate(input) {
    var thisAlert = $(input).parent();
    $(thisAlert).addClass('alert-validate');
  }

  function hideValidate(input) {
    var thisAlert = $(input).parent();
    $(thisAlert).removeClass('alert-validate');
  }
};

module.exports = {
  insertLoginHtml: insertLoginHtml,
  registerLoginCallbacks: registerLoginCallbacks,
  showLoginDialog: showLoginDialog
};